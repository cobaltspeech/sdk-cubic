<!DOCTYPE html>
<html>
  <head>
    <title>Cubic SDK -- Cobalt</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Installing the cubicsvr Image :: Cubic SDK -- Cobalt</title>
<link rel="shortcut icon" href="/sdk-cubic/images/favicon.ico" type="image/x-icon" />
<link href="/sdk-cubic/css/nucleus.css" rel="stylesheet">
<link href="/sdk-cubic/css/font-awesome.min.css" rel="stylesheet">
<link href="/sdk-cubic/css/hybrid.css" rel="stylesheet">
<link href="/sdk-cubic/css/featherlight.min.css" rel="stylesheet">
<link href="/sdk-cubic/css/auto-complete.css" rel="stylesheet">
<link href="/sdk-cubic/theme-original/style.css" rel="stylesheet">

  <link href="/sdk-cubic/theme-original/variant-blue.css" rel="stylesheet">

<link rel="stylesheet" href="/sdk-cubic/css/bootstrap.min.css">
<script src="/sdk-cubic/js/jquery-2.x.min.js"></script>
<style type="text/css">
  :root #header + #content > #left > #rlblock_left {
    display:none !important;
  }
</style>
<link href="/sdk-cubic/css/tabs.css" rel="stylesheet" type="text/css">
<script src="/sdk-cubic/js/tabs.js"></script>


    
  </head>
  <body data-url="/sdk-cubic/getting-started/cubic_docker/">
    
      <div id="headermain"></div>
<nav id="sidebar" class="showVisitedLinks">



<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
      
	
  
    <p><img src="/sdk-cubic/images/logo-white.png" alt="Cobalt's SDK Documentation" /></p>

<p>Cubic SDK &ndash; Cobalt</p>

  


    </div>
        <div class="searchbox">
		    <label for="search-by"><i class="fa fa-search"></i></label>
		    <input data-search-input id="search-by" type="text" placeholder="Search...">
		    <span data-search-clear=""><i class="fa fa-close"></i></span>
		</div>
		<script type="text/javascript" src="/sdk-cubic/js/lunr.min.js"></script>
		<script type="text/javascript" src="/sdk-cubic/js/auto-complete.js"></script>
		<script type="text/javascript">
        
            var baseurl = "https:\/\/cobaltspeech.github.io\/sdk-cubic";
        
		</script>
		<script type="text/javascript" src="/sdk-cubic/js/search.js"></script>
  </div>

      <ul class="topics">
            <li data-nav-id="/sdk-cubic/" class="dd-item">
            <a href="/sdk-cubic/"><i class="fa fa-fw fa-home"></i></a>
            </li>
    <li data-nav-id="/sdk-cubic/getting-started/" class="dd-item parent alwaysopen haschildren
        ">
      <div>
      <a href="/sdk-cubic/getting-started/">Getting started</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/sdk-cubic/getting-started/quickstart/" class="dd-item">
        <div>
          <a href="/sdk-cubic/getting-started/quickstart/">
            Quick Start
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-cubic/getting-started/cubic_docker/" class="dd-item active">
        <div>
          <a href="/sdk-cubic/getting-started/cubic_docker/">
            Installing the cubicsvr Image
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-cubic/getting-started/installation/" class="dd-item">
        <div>
          <a href="/sdk-cubic/getting-started/installation/">
            Installing the SDK
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-cubic/getting-started/connecting/" class="dd-item">
        <div>
          <a href="/sdk-cubic/getting-started/connecting/">
            Setup Connection
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-cubic/getting-started/recognize/" class="dd-item">
        <div>
          <a href="/sdk-cubic/getting-started/recognize/">
            Synchronous Recognition
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-cubic/getting-started/streaming/" class="dd-item">
        <div>
          <a href="/sdk-cubic/getting-started/streaming/">
            Streaming Recognition
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/sdk-cubic/protobuf/" class="dd-item haschildren
        ">
      <div>
      <a href="/sdk-cubic/protobuf/">Cubic API Reference</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/sdk-cubic/protobuf/autogen-doc-cubic-proto/" class="dd-item">
        <div>
          <a href="/sdk-cubic/protobuf/autogen-doc-cubic-proto/">
            Cubic Protobuf API Docs
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>



        <section id="shortcuts">
                <li class="" role=""><h3>More</h3><a href="https://github.com/cobaltspeech/sdk-cubic" target="_blank" rel="noopener"><i class='fa fa-github'></i> <label>Github repo</label></a></li>
                <li class="" role=""><a href="https://www.cobaltspeech.com/contact" target="_blank" rel="noopener"><i class='fa fa-bookmark'></i> <label>Contact us</label></a></li>
        </section>
            <a id="clear-history" class="" href="#" data-clear-history-toggle=""><i class="fa  fa-history"></i> Clear History</a>

    <hr />
    <li></li>
    
    </ul>

 <section id="footer">
    </section>
  </div>
</nav>



<section id="body">
<div id="overlay"></div>
<div class="padding highlightable">

  <div id="top-bar">
    <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
        <span id="sidebar-toggle-span">
          <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
            <i class="fa fa-bars"></i>
          </a>
        </span>
        <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
        <span class="links">
        







 <a href='/sdk-cubic/'>Cubic SDK Documentation</a> > <a href='/sdk-cubic/getting-started/'>Getting started</a> > Installing the cubicsvr Image

 

 

   
        </span>
    </div>
    
    
    <div class="progress">
        <div class="wrapper">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#contents-of-the-docker-image">Contents of the docker image</a>
<ul>
<li>
<ul>
<li><a href="#cobalt-specific-files">Cobalt-specific files</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
        </div>
    </div>
    

  </div>


<div id="body-inner">
  
    <h1>Installing the cubicsvr Image</h1>
  



    
    
    
    <p>The SDK is used to call an instance of cubicsvr using gRPC.  Cobalt distributes a docker image that contains the cubicsvr binary and model files.
It is not necessary to go through through these steps to call the demo server for evaluation purposes, only to run cubicsvr on premises.</p>

<ol>
<li><p>Contact Cobalt to get a link to the image file in AWS S3.  This link will expire in two weeks, so be sure to download the file to your own server.</p></li>

<li><p>Download with the AWS CLI if you have it, or with curl:</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#40ffff">URL</span>=<span style="color:#ed9d13">&#34;the url sent by Cobalt&#34;</span>
<span style="color:#40ffff">IMAGE_NAME</span>=<span style="color:#ed9d13">&#34;name you want to give the file (should end with the same extension as the url, usually bz2)&#34;</span>
curl <span style="color:#40ffff">$URL</span> -L -o <span style="color:#40ffff">$IMAGE_NAME</span></code></pre></div></li>

<li><p>Load the docker image:</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker load &lt; <span style="color:#40ffff">$IMAGE_NAME</span></code></pre></div>
<p>This will output the name of the image (e.g. cubicsvr-demo-en_us-16).</p></li>

<li><p>Start the cubic service listening:</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker run -p <span style="color:#3677a9">2727</span>:2727 -p <span style="color:#3677a9">8080</span>:8080 --name cobalt cubicsvr-demo-en_us-16</code></pre></div>
<p>That will start listening for grpc commands on port 2727 and http requests on 8080, and will stream the debug log to stdout.  (You can replace <code>--name cobalt</code> with whatever name you want.  That just provides a way to refer back to the currently running container.)</p></li>

<li><p>Verify the service is running by calling</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl http://localhost:8080/api/version</code></pre></div></li>

<li><p>If you want to explore the package to see the model files etc, call the following to open the bash terminal on the previously run image.  Model files are located in the /model directory.</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker <span style="color:#24909d">exec</span> -it cobalt bash</code></pre></div></li>
</ol>

<h2 id="contents-of-the-docker-image">Contents of the docker image</h2>

<ul>
<li><strong>Base docker image</strong> : debian-stretch-slim</li>
<li><strong>Additional dependencies</strong> (installed with yum install on centos or apt-get on ubuntu)

<ul>
<li>libgfortran3</li>
<li>sox</li>
</ul></li>
</ul>

<h4 id="cobalt-specific-files">Cobalt-specific files</h4>

<ul>
<li><strong>cubicsvr</strong> - binary for performing Automatic Speech Recognition</li>
<li><strong>model.config</strong> - top-level config</li>
<li><strong>am/nnet3_online/final.mdl</strong> - this is the acoustic model</li>
<li><strong>am/nnet3_online/conf/online_cmvn.conf</strong> - feature extraction parameters for the features fed into the GMM model used for i-vector statistics accumulation.</li>
<li><strong>am/nnet3_online/conf/splice.conf</strong> - GMM feature context when accumulating statistics for i-vector accumulation.</li>
<li><strong>am/nnet3_online/ivector_extractor/</strong>* - Kaldi configuration files related to ivectors<br /></li>
<li><strong>graph/HCLG.fst</strong> - the decoding graph: the combination of the AMs transition graph, the lexicon, and the language model</li>
<li><strong>graph/words.txt</strong> - an integer to word mapping, needed because the output of the HCLG graph contains only integer symbol IDs</li>
<li><strong>graph/phones/word_boundary.int</strong> - this is needed only when confusion network output is requested, it tells the decoder which phones are at word boundaries</li>
</ul>

    
    
          <footer class=" footline" >
	
</footer>
  </div>
</div>

<div id="navigation">
<a class="nav nav-prev" href="/sdk-cubic/getting-started/quickstart/" title="Quick Start"> <i class="fa fa-chevron-left"></i><label>Quick Start</label></a>
    <a class="nav nav-next" href="/sdk-cubic/getting-started/installation/" title="Installing the SDK" style="margin-right: 0px;"><label>Installing the SDK</label><i class="fa fa-chevron-right"></i></a></div>

</section>
<div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
  <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
</div>    

<script src="/sdk-cubic/js/clipboard.min.js"></script>
<script src="/sdk-cubic/js/featherlight.min.js"></script>
<script src="/sdk-cubic/js/html5shiv-printshiv.min.js"></script>

<script src="/sdk-cubic/js/modernizr.custom.71422.js"></script>
<script src="/sdk-cubic/js/docdock.js"></script>
<script src="/sdk-cubic/theme-original/script.js"></script>


    

    
    

    
  </body>
</html>