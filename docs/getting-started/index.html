<!DOCTYPE html>
<html>
  <head>
    <title>Cubic SDK -- Cobalt</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Server Setup :: Cubic SDK -- Cobalt</title>
<link rel="shortcut icon" href="/sdk-cubic/images/favicon.ico" type="image/x-icon" />
<link href="/sdk-cubic/css/nucleus.css" rel="stylesheet">
<link href="/sdk-cubic/css/font-awesome.min.css" rel="stylesheet">
<link href="/sdk-cubic/css/hybrid.css" rel="stylesheet">
<link href="/sdk-cubic/css/featherlight.min.css" rel="stylesheet">
<link href="/sdk-cubic/css/auto-complete.css" rel="stylesheet">
<link href="/sdk-cubic/theme-original/style.css" rel="stylesheet">

  <link href="/sdk-cubic/theme-original/variant-blue.css" rel="stylesheet">

<link rel="stylesheet" href="/sdk-cubic/css/bootstrap.min.css">
<script src="/sdk-cubic/js/jquery-2.x.min.js"></script>
<style type="text/css">
  :root #header + #content > #left > #rlblock_left {
    display:none !important;
  }
</style>
<link href="/sdk-cubic/css/tabs.css" rel="stylesheet" type="text/css">
<script src="/sdk-cubic/js/tabs.js"></script>


    
  </head>
  <body data-url="/sdk-cubic/getting-started/">
    
      <div id="headermain"></div>
<nav id="sidebar" class="showVisitedLinks">



<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
      
	
  
    <p><img src="/sdk-cubic/images/logo-white.png" alt="Cobalt&rsquo;s SDK Documentation"></p>
<p>Cubic SDK &ndash; Cobalt</p>

  


    </div>
        <div class="searchbox">
		    <label for="search-by"><i class="fa fa-search"></i></label>
		    <input data-search-input id="search-by" type="text" placeholder="Search...">
		    <span data-search-clear=""><i class="fa fa-close"></i></span>
		</div>
		<script type="text/javascript" src="/sdk-cubic/js/lunr.min.js"></script>
		<script type="text/javascript" src="/sdk-cubic/js/auto-complete.js"></script>
		<script type="text/javascript">
        
            var baseurl = "https:\/\/cobaltspeech.github.io\/sdk-cubic";
        
		</script>
		<script type="text/javascript" src="/sdk-cubic/js/search.js"></script>
  </div>

      <ul class="topics">
            <li data-nav-id="/sdk-cubic/" class="dd-item">
            <a href="/sdk-cubic/"><i class="fa fa-fw fa-home"></i></a>
            </li>
    <li data-nav-id="/sdk-cubic/getting-started/" class="dd-item active
        ">
      <div>
      <a href="/sdk-cubic/getting-started/">Server Setup</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/sdk-cubic/using-cubic-sdk/" class="dd-item haschildren
        ">
      <div>
      <a href="/sdk-cubic/using-cubic-sdk/">Using Cubic-SDK</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/sdk-cubic/using-cubic-sdk/installation/" class="dd-item">
        <div>
          <a href="/sdk-cubic/using-cubic-sdk/installation/">
            Installing the SDK
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-cubic/using-cubic-sdk/connecting/" class="dd-item">
        <div>
          <a href="/sdk-cubic/using-cubic-sdk/connecting/">
            Setup Connection
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-cubic/using-cubic-sdk/recognize/" class="dd-item">
        <div>
          <a href="/sdk-cubic/using-cubic-sdk/recognize/">
            Synchronous Recognition
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-cubic/using-cubic-sdk/streaming/" class="dd-item">
        <div>
          <a href="/sdk-cubic/using-cubic-sdk/streaming/">
            Streaming Recognition
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-cubic/using-cubic-sdk/client-configs/" class="dd-item">
        <div>
          <a href="/sdk-cubic/using-cubic-sdk/client-configs/">
            Recognition Configurations
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/sdk-cubic/using-cubic-sdk/android/" class="dd-item">
        <div>
          <a href="/sdk-cubic/using-cubic-sdk/android/">
            Android Integrations
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/sdk-cubic/protobuf/" class="dd-item haschildren
        ">
      <div>
      <a href="/sdk-cubic/protobuf/">Cubic API Reference</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/sdk-cubic/protobuf/autogen-doc-cubic-proto/" class="dd-item">
        <div>
          <a href="/sdk-cubic/protobuf/autogen-doc-cubic-proto/">
            Cubic Protobuf API Docs
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>



        <section id="shortcuts">
                <li class="" role=""><h3>More</h3><a href="https://github.com/cobaltspeech/sdk-cubic" target="_blank" rel="noopener"><i class='fa fa-github'></i> <label>Github repo</label></a></li>
                <li class="" role=""><a href="https://www.cobaltspeech.com/contact" target="_blank" rel="noopener"><i class='fa fa-bookmark'></i> <label>Contact us</label></a></li>
        </section>
            <a id="clear-history" class="" href="#" data-clear-history-toggle=""><i class="fa  fa-history"></i> Clear History</a>

    <hr />
    <li></li>
    
    </ul>

 <section id="footer">
    </section>
  </div>
</nav>



<section id="body">
<div id="overlay"></div>
<div class="padding highlightable">

  <div id="top-bar">
    <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
        <span id="sidebar-toggle-span">
          <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
            <i class="fa fa-bars"></i>
          </a>
        </span>
        <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
        <span class="links">
        




 <a href='/sdk-cubic/'>Cubic SDK Documentation</a> > Server Setup

 

   
        </span>
    </div>
    
    
    <div class="progress">
        <div class="wrapper">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#installing-the-cubic-server-image">Installing the Cubic Server Image</a></li>
    <li><a href="#contents-of-the-docker-image">Contents of the docker image</a>
      <ul>
        <li><a href="#cobalt-specific-files">Cobalt-specific files</a></li>
      </ul>
    </li>
  </ul>
</nav>
        </div>
    </div>
    

  </div>


<div id="body-inner">
  
    <h1>Server Setup</h1>
  



    
    
    

<p>This section is meant to get you started using Cubic Server via a Docker image.</p>
<p>It is not necessary to go through through these steps to call the demo server for evaluation purposes, only to run Cubic Server on premises.  The demo server can be found at <a href="https://demo-cubic.cobaltspeech.com">https://demo-cubic.cobaltspeech.com</a>.</p>
<div class="panel panel-default">
	<div class="panel-heading">Note</div>
	<div class="panel-body">
Commercial use of the demo service is not permitted. This server is for testing and demonstration purposes only and is not guaranteed to support high availability or high volume. Data uploaded to the server may be stored for internal purposes.
</div>
</div>
<h2 id="installing-the-cubic-server-image">Installing the Cubic Server Image</h2>
<p>The SDK communicates with a Cubic Server instance using <a href="https://grpc.io">gRPC</a>.  Cobalt distributes a docker image that contains the <code>cubicsvr</code> binary and model files.</p>
<ol>
<li>
<p>Contact Cobalt to get a link to the image file in AWS S3.  This link will expire in two weeks, so be sure to download the file to your own server.</p>
</li>
<li>
<p>Download with the AWS CLI if you have it, or with curl:</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#40ffff">URL</span>=<span style="color:#ed9d13">&#34;the url sent by Cobalt&#34;</span>
<span style="color:#40ffff">IMAGE_NAME</span>=<span style="color:#ed9d13">&#34;name you want to give the file (should end with the same extension as the url, usually bz2)&#34;</span>
curl <span style="color:#40ffff">$URL</span> -L -o <span style="color:#40ffff">$IMAGE_NAME</span>
</code></pre></div></li>
<li>
<p>Load the docker image</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker load &lt; <span style="color:#40ffff">$IMAGE_NAME</span>
</code></pre></div><p>This will output the name of the image (e.g. cubicsvr-demo-en_us-16).</p>
</li>
<li>
<p>Start the cubic service</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker run -p 2727:2727 -p 8080:8080 --name cobalt -v /path/on/host/usage-log:/usage cubicsvr-demo-en_us-16
</code></pre></div><p>That will start listening for grpc commands on port 2727 and http requests on 8080, and will stream the debug log to stdout.  (You can replace <code>--name cobalt</code> with whatever name you want.  That just provides a way to refer back to the currently running container.)</p>
<p>The command also specifies the <a href="https://docs.docker.com/storage/bind-mounts/">bind-mount</a> to which usage data is being written so you can track the amount of audio Cubic Server has processed, and submit the usage log to Cobalt if you have a volume-based license. If you have a volume-based license, you MUST provide this bind-mount so the usage data will persist even when the container is restarted; Cubic Server will not start if that location cannot be written to.</p>
</li>
<li>
<p>Verify the service is running by calling</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl http://localhost:8080/api/version
</code></pre></div></li>
<li>
<p>If you want to explore the package to see the model files etc, call the following to open the bash terminal on the previously run image.  Model files are located in the /model directory.</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker <span style="color:#24909d">exec</span> -it cobalt bash
</code></pre></div></li>
</ol>
<h2 id="contents-of-the-docker-image">Contents of the docker image</h2>
<ul>
<li><strong>Base docker image</strong> : debian-stretch-slim</li>
<li><strong>Additional dependencies</strong>
<ul>
<li>sox</li>
</ul>
</li>
</ul>
<h3 id="cobalt-specific-files">Cobalt-specific files</h3>
<ul>
<li><strong>cubicsvr</strong> - binary for performing Automatic Speech Recognition</li>
<li><strong>model.config</strong> - top-level config</li>
<li><strong>am/nnet3_online/final.mdl</strong> - this is the acoustic model</li>
<li><strong>am/nnet3_online/conf/online_cmvn.conf</strong> - feature extraction parameters for the features fed into the GMM model used for i-vector statistics accumulation.</li>
<li><strong>am/nnet3_online/conf/splice.conf</strong> - GMM feature context when accumulating statistics for i-vector accumulation.</li>
<li><strong>am/nnet3_online/ivector_extractor/</strong>* - Kaldi configuration files related to ivectors</li>
<li><strong>graph/HCLG.fst</strong> - the decoding graph: the combination of the AMs transition graph, the lexicon, and the language model</li>
<li><strong>graph/words.txt</strong> - an integer to word mapping, needed because the output of the HCLG graph contains only integer symbol IDs</li>
<li><strong>graph/phones/word_boundary.int</strong> - this is needed only when confusion network output is requested, it tells the decoder which phones are at word boundaries</li>
</ul>


    
    
          <footer class=" footline" >
	
</footer>
  </div>
</div>

<div id="navigation">
<a class="nav nav-prev" href="/sdk-cubic/" title="Cubic SDK Documentation"> <i class="fa fa-chevron-left"></i><label>Cubic SDK Documentation</label></a>
    <a class="nav nav-next" href="/sdk-cubic/using-cubic-sdk/" title="Using Cubic-SDK" style="margin-right: 0px;"><label>Using Cubic-SDK</label><i class="fa fa-chevron-right"></i></a></div>

</section>
<div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
  <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
</div>    

<script src="/sdk-cubic/js/clipboard.min.js"></script>
<script src="/sdk-cubic/js/featherlight.min.js"></script>
<script src="/sdk-cubic/js/html5shiv-printshiv.min.js"></script>

<script src="/sdk-cubic/js/modernizr.custom.71422.js"></script>
<script src="/sdk-cubic/js/docdock.js"></script>
<script src="/sdk-cubic/theme-original/script.js"></script>


    

    
    

    
  </body>
</html>